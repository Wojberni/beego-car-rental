
# Project Title

This my sandbox project for learning Golang with Beego framework. I am using bee tool to manage my project.


## Installation

After cloning the repository to run the project you must have golang installed on your computer. Recommended version is 18+. Link for [Go install](https://go.dev/doc/install). 

(Optional) Now create workspace, so the VSCode can reference the needed dependencies. I found this very useful, when working with VSCode. This will generate a go.work file, where all module names will be stored. When creating a new module just remember to add `go work use $DIRECTORY` to add directory to workspace. Now go into parent directory and run commands given below.

```bash
    go work init
    go work use beego-car-rental
```

Lastly, go into project directory and run

```bash
    go mod tidy
```

This will download all the dependencies needed and generate `go.sum` file. Now we can build and run the server using standard go commands.

```bash
    go build main.go
    ./beego-car-rental
```

As an alternative you can install bee tool and use it to run project. More information on installing [bee tool](https://beego.gocn.vip/beego/en-US/developing/bee/). 

> Tip: Use `go install` instead of `go get` for newer versions of Golang.

## Bee tool

Bee tool proved very useful for managing beego server. With commands it provide you can automate many tasks. I use it for running the project, generating Swagger docs, dockerizing app.

### Swagger Docs

One of useful examples is autogenerating Swagger docs. Beego has integrated static Swagger docs for developing purposes. In your project directory run:

```bash
    bee generate docs
    bee run
    # alternative command to autodownload swagger file and autogenerate docs
    bee run -gendoc -downdoc
```

This command will autogenerate docs in `/swagger` directory in your project. Now after setting property `beego.SetStaticPath("/swagger", "swagger")` in `main.go` file you will be able to access swagger on your `/swagger` endpoint. You might need to run `bee generate routers` to autogenerate annotated with comments router. That information from this autogenerated `commentsRouter` is used while creating docs using tool.

> **Bug**: `swagger.json` and `swagger.yaml` are storing generated configuration of your swagger. There was a bug, where configuration wasn't imported from `swagger.json` file. You might change URL to `/swagger/swagger.json` in `window.onload` function, that is being called in `index.html` file.


### Database migrations

```bash
    bee migrate -driver=postgres -conn=postgres://dev:1234@localhost/beego_car_rental_dev?sslmode=disable
```

// TODO: after test explain more about bee migration tool

### Dockerizing application

With a command `bee dockerize` you can autogenerate a `Dockerfile` with `docker-compose.yaml`, that you can use to dockerize you app. It can be used as a template for building your whole app config (e.g. add database and other services). Now run:

```bash
    docker-compose up -d
    # -d for detached mode run in background
```

After a minute app and database should be up and running.

### Autogenerating scaffold, controller, tests, view or model

// TODO: bee generate scaffold overview

// TODO: bee generate controller overview

// TODO: bee generate tests overview

// TODO: bee generate view overview

// TODO: bee generate model overview